{% extends "podmin/site/base.html" %}
{% load static from staticfiles %}
{% load paginator %}

{% block externals %}

{% endblock %}

{% block title %}{{ podcast.title }}{% endblock %}
{% block podcast_subtitle %}{{ podcast.subtitle }}{% endblock %}

{% block content %}

<div class="row">
    <div class="twelve columns">
    {% if messages %}
        <ul class="messages">
        {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    </div>
</div>

<!-- Block with the podcast image and description -->
<div class="row">
  <div class="three columns">
    {% if podcast.image %}
    <img src="{{podcast.medium_image}}" alt="podcast image">
    {% endif %}
  </div>
  <div class="nine columns">
    <h2><a href="{% url 'podcast_show' slug=podcast.slug %}">
        {{ podcast.title }}
        </a>
    </h2>
    <h3>{{podcast.subtitle}}</h3>
    {% for category in podcast.itunes_categories.all %}
      <span class="small">{{ category }}</span><br>
    {% endfor %}
  </div>
</div>

<div class="row page-container">
    {% if podcast.description %}
    <div class="row">
        <div class="twelve columns">
        <p>{{ podcast.description | linebreaks }}</p>
        </div>
    </div>
    {% endif %}


  <div class="row">
    <div class="twelve columns">
      <h3>Episodes</h3>
    </div>
  </div>

  {% for e in episodes %}
  <div class="row">
    <div class="two columns">
    {% if e.image or e.buffer_image %}
        {% if e.image %}
            <img src="{{e.small_image}}" alt="podcast image">
        {% else %}
            <img src="{% url 'image_buffer' slug=podcast.slug eid=e.id size='small' %}" alt="podcast image">
        {% endif %}

    {% else %}
        <img src="{{podcast.small_image}}" alt="podcast image">
    {% endif %}

    </div>
    <div class="ten columns">
      <a href="{% url 'episode_show' slug=e.podcast.slug eid=e.id %}">
        {{ e.title }}
      </a><br>
      {{ e.description }}<br>
      <em>published {{ e.pub_date }}</em>
      {% if editor or user.is_superuser %}
        <a href="{% url 'episode_edit' slug=e.podcast.slug eid=e.id %}">Edit</a> |
        <a href="{% url 'episode_delete' slug=e.podcast.slug eid=e.id %}">Delete</a>
      {% endif %}
    </div>
  </div>

  {% endfor %}

  {% if episodes.paginator.num_pages > 1 %}
  <div class="row">
    <div class="centered six columns">
      {% paginator episodes 8 %}
    </div>
  </div>
  {% endif %}
</div>

{% endblock %}

{% block footscripts %}

{% endblock %}

